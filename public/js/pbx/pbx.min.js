/*=========================================================================================
    File Name: pbx.min.js
    Description: pbx general scripts
    --------------------------------------------------------------------------------------
    Item Name: Vuexy  - Vuejs, HTML & Laravel Admin Dashboard Template
    Author: Lê Chí Đại
    Author Email: dai.le@southtelecom.vn
==========================================================================================*/
const base_url=$("meta[name=base_url]").attr("content"),htmlEl=document.getElementsByTagName("body")[0];var pbx={init:function(){$.fn.serializeObject=function(){var e=$("meta[name=csrf]").attr("content").split(":"),t={[e[0]]:e[1]},n=this.serializeArray();return $.each(n,function(){t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t},$(document).ajaxSend(function(e,t,n){}),$(document).ajaxSuccess(function(e,t,n){if(null!=t.responseJSON){let e=t.responseJSON.csrf.name,n=t.responseJSON.csrf.value;document.querySelector('meta[name="csrf"]').setAttribute("content",e+":"+n),$(document).find('input[type="hidden"]').filter('[name="'+e+'"]').val(n)}}),$(document).ajaxComplete(function(e,t,n){if(null!=t.responseJSON){let e=t.responseJSON.csrf.name,n=t.responseJSON.csrf.value;document.querySelector('meta[name="csrf"]').setAttribute("content",e+":"+n),$(document).find('input[type="hidden"]').filter('[name="'+e+'"]').val(n)}else 403==t.status&&(alert("session has been redirected"),window.location.reload())})},logout:function(e=!1){let t,n;e?(t=e.csrf,n={[e.csrf.name]:e.csrf.value}):n={[(t=$("meta[name=csrf]").attr("content").split(":"))[0]]:t[1]},$.ajax({url:base_url+"account/logout",type:"POST",data:n,dataType:"json",success:function(e){1!==e.status&&alert("Logout failed."),window.location.reload()},error:function(e){}})},loginManage:function(){var e=$("meta[name=csrf]").attr("content").split(":");$.ajax({url:base_url+"account/loginManage",type:"POST",data:{[e[0]]:e[1]},dataType:"json",success:function(e){1!==e.status&&alert(e.message),window.location.reload()},error:function(e){}})},copyContext:function(){document.execCommand("copy")},pasteContext:function(){let e=$("ul.contextmenu > li.contextmenu-copy > a").attr("context");document.execCommand("insertText",!1,e)}};$(document).ready(function(){localStorage.getItem("theme")&&(htmlEl.dataset.theme=localStorage.getItem("theme"))}),$(window).on("load",function(){if(base_url.match(/(http(s)\:\/\/)?[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,3}(\S*)?/)){let e="",t=!1;window.addEventListener("click",e=>{$("ul.contextmenu").hide()}),document.addEventListener("dblclick",function(){window.getSelection?e=window.getSelection().toString():document.selection&&"Control"!=document.selection.type&&(e=document.selection.createRange().text)},!0),document.addEventListener("mouseup",function(n){window.getSelection?e=window.getSelection().toString():document.selection&&"Control"!=document.selection.type&&(e=document.selection.createRange().text),t=!!$(n.target).is('input[type="text"],textarea')},!0),document.addEventListener("contextmenu",function(n){if(n.preventDefault(),""!=e||t){""!=e&&$("ul.contextmenu > li.contextmenu-copy > a").attr("context",e),t?$("ul.contextmenu > li.contextmenu-paste").show():$("ul.contextmenu > li.contextmenu-paste").hide();var o=$(document).width(),c=$(document).height(),a=n.pageX,s=n.pageY,i=$("ul.contextmenu").width(),u=$("ul.contextmenu").height();a+i+10>=o&&s+u+10>=c?(posLeft=a-i-10+"px",posTop=s-u-10+"px"):a+i+10>=o?(posLeft=a-i-10+"px",posTop=s+10+"px"):s+u+10>=c?(posLeft=a+10+"px",posTop=s-u-10+"px"):(posLeft=a+10+"px",posTop=s+10+"px"),$("ul.contextmenu").css({left:posLeft,top:posTop}).show()}return!1}),document.onkeydown=function(e){return 123!=e.keyCode&&((!e.ctrlKey||!e.shiftKey||e.keyCode!="I".charCodeAt(0))&&((!e.ctrlKey||!e.shiftKey||e.keyCode!="C".charCodeAt(0))&&((!e.ctrlKey||!e.shiftKey||e.keyCode!="J".charCodeAt(0))&&((!e.ctrlKey||e.keyCode!="U".charCodeAt(0))&&void 0))))}}pbx.init()});