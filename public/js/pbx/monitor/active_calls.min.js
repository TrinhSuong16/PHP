/*=========================================================================================
    File Name: active_calls.min.js
    Description: Monitor board
    --------------------------------------------------------------------------------------
    Item Name: Vuexy  - Vuejs, HTML & Laravel Admin Dashboard Template
    Author: Lê Chí Đại
    Author Email: dai.le@southtelecom.vn
==========================================================================================*/
if(pbx.init(),$(document).ready(function(){$("#grid").kendoGrid({dataSource:[],sortable:!1,pageable:!1,filterable:!1,noRecords:!0,scrollable:!0,columns:[{field:"no",title:controlsKendo.grid.column.title.no,width:50,headerAttributes:{class:"table-header-cell",style:"text-align: center; font-size: 14px"},attributes:{class:"table-cell",style:"text-align: center;"}},{field:"src",title:controlsKendo.grid.column.title.src,width:150,headerAttributes:{class:"table-header-cell",style:"text-align: center; font-size: 14px"},attributes:{class:"table-cell",style:"text-align: center;"}},{field:"dst",title:controlsKendo.grid.column.title.dst,width:150,headerAttributes:{class:"table-header-cell",style:"text-align: center; font-size: 14px"},attributes:{class:"table-cell",style:"text-align: center;"}},{field:"dstchan",title:controlsKendo.grid.column.title.dstchannel,headerAttributes:{class:"table-header-cell",style:"text-align: center; font-size: 14px"},attributes:{class:"table-cell",style:"text-align: center;"}},{field:"starttime",title:controlsKendo.grid.column.title.starttime,width:160,template:function(e){return void 0===e.starttime||null==e.starttime?"":"object"==typeof e.starttime?kendo.toString(new Date(e.starttime.$date),"yyyy-MM-dd HH:mm:ss"):isNaN(e.starttime)?e.starttime:kendo.toString(new Date(1e3*e.starttime),"yyyy-MM-dd HH:mm:ss")},headerAttributes:{class:"table-header-cell",style:"text-align: center; font-size: 14px"},attributes:{class:"table-cell",style:"text-align: center;"}},{field:"answertime",title:controlsKendo.grid.column.title.answertime,width:160,template:function(e){return void 0===e.answertime||null==e.answertime?"":"object"==typeof e.answertime?kendo.toString(new Date(e.answertime.$date),"yyyy-MM-dd HH:mm:ss"):isNaN(e.answertime)?e.answertime:kendo.toString(new Date(1e3*e.answertime),"yyyy-MM-dd HH:mm:ss")},headerAttributes:{class:"table-header-cell",style:"text-align: center; font-size: 14px"},attributes:{class:"table-cell",style:"text-align: center;"}},{field:"disposition",title:controlsKendo.grid.column.title.disposition,width:150,headerAttributes:{class:"table-header-cell",style:"text-align: center; font-size: 14px"},attributes:{class:"table-cell",style:"text-align: center;"}}]})}),"undefined"!=typeof EventSource){var path=base_url+"monitor/active_calls/sse",es=new EventSource(path);es.addEventListener("total",e=>{$("span#overview_total").text(e.data)}),es.addEventListener("totallink",e=>{$("span#overview_link").text(e.data)}),es.addEventListener("totalring",e=>{$("span#overview_ring").text(e.data)}),es.addEventListener("totaldial",e=>{$("span#overview_dial").text(e.data)}),es.addEventListener("totalringing",e=>{$("span#overview_ringing").text(e.data)}),es.addEventListener("activecalls",e=>{let t=new kendo.data.DataSource({data:JSON.parse(e.data),change:function(e){idx=1,$.each(this.data(),(e,t)=>{t.no=idx,idx++})}});$("#grid").data("kendoGrid").setDataSource(t)})}else alert("Sorry! No server-sent events support.."),window.location=base_url;