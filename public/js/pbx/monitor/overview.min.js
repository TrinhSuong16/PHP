/*=========================================================================================
File Name: overview.js
Description: Monitor board
--------------------------------------------------------------------------------------
Item Name: Vuexy  - Vuejs, HTML & Laravel Admin Dashboard Template
Author: Lê Chí Đại
Author Email: dai.le@southtelecom.vn
==========================================================================================*/
if("undefined"!=typeof EventSource){var path=base_url+"monitor/overview/sse",es=new EventSource(path);es.addEventListener("groups",n=>{var s=JSON.parse(n.data),e="";s.forEach(n=>{e+='<div class="row">\n<div class="col-sm-12">\n<div class="card">\n<div class="card-content">\n<div class="card-body row">\n<div class="col-3">\n<h6 >Groups</h6>\n<h4 class="text-uppercase">'+n.groupname+'</h4>\n</div>\n<div class="col-9 row text-center">\n<div class="col-12 col-md-2 offset-md-2">\n<h6 >Total Agents</h6>\n<h5>'+n.total_agents+'</h5>\n</div>\n<div class="col-12 col-md-2">\n<h6 >Total Registered</h6>\n<h5>'+n.total_registered+'</h5>\n</div>\n<div class="col-12 col-md-2">\n<h6 >Total Unregistered</h6>\n<h5>'+n.total_unregistered+'</h5>\n</div>\n<div class="col-12 col-md-2">\n<h6>Total Unknown</h6>\n<h5>'+n.total_unknown+'</h5>\n</div>\n<div class="col-12 col-md-2">\n<h6>Active Calls</h6>\n<h5>'+n.oncalls+"</h5>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>",e+='<div class="row">';for(const[s,i]of Object.entries(n.extensions))e+='<div class="col-xl-2 col-md-4 col-sm-6">\n<div class="card text-center">\n<div class="card-content">\n<div class="card-body">\n'+(["registered","reachable"].includes(i.status)?'<div class="avatar '+(null!=i.oncall?"bg-rgba-primary phone-ringing":"bg-rgba-success")+' p-50 m-0 mb-1 ">\n<div class="avatar-content" data-extension="'+s+'">\n<i class="feather '+(1==i.dnd?"icon-user-minus text-warning":null==i.oncall?"text-success icon-user-check":"text-primary call-ring "+("out"==i.oncall.direction?"icon-phone-outgoing":"icon-phone-incoming"))+' font-medium-5"></i>\n</div>\n</div>':' <div class="avatar bg-rgba-dark p-50 m-0 mb-1">\n<div class="avatar-content" data-extension="'+s+'">\n<i class="feather '+(1==i.dnd?"icon-user-minus text-warning":"icon-user-x text-dark")+' font-medium-5"></i>\n</div>\n</div>\n\n')+'\n<h3 class="text-bold-700">'+s+'</h3>\n<p class="mb-0 line-ellipsis">'+i.callername+"</p>\n"+(void 0!==i.oncall?'<p class="mb-0 line-ellipsis">Call '+i.oncall.direction+"("+i.oncall.target+")</p>":'<p class="mb-0 line-ellipsis">&nbsp;</p>')+"\n"+(null!=i.peering?["registered","reachable"].includes(i.status)&&""!=i.peering?'<p class="mb-0 line-ellipsis">Peering: '+i.peering+'</p><p class="mb-0 line-ellipsis">IP: '+i.ipaddress+"</p>":'<p class="mb-0 line-ellipsis">&nbsp;</p><p class="mb-0 line-ellipsis">&nbsp;</p>':"")+"\n</div>\n</div>\n</div>\n</div>";e+="</div>"}),$("#statistics-card").html(e)})}else alert("Sorry! No server-sent events support.."),window.location=base_url;